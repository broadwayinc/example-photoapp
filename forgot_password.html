<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
<link rel="stylesheet" type="text/css" href="main.css">

<form id='requestCodeForm' onsubmit="skapi.forgotPassword(event, { 
        response: res => {
            document.getElementById('requestCodeForm').setAttribute('hidden', '');
            document.getElementById('resetPasswordForm').removeAttribute('hidden');
            document.getElementById('resetEmailInput').value = document.getElementById('emailInput').value;
        },
        onerror: err => alert(err.message)
    })">
    <fieldset>
        <legend>
            <h1>Forgot Password?</h1>
        </legend>
        Enter your login e-mail to receive verification code.<br><br>
        <label>
            Login E-Mail: <input id='emailInput' type='email' name="email" placeholder="user@email.com" required>
        </label>

        <input type="submit" value="Send Verification Code">
    </fieldset>
</form>

<form hidden id='resetPasswordForm' onsubmit="skapi.resetPassword(event, {
        response: res => {
            window.alert('Your password has been reset');
            window.location.replace('login.html');
        },
        onerror: err => alert(err.message) 
    })">
    <fieldset>
        <legend>
            <h1>Reset Password</h1>
        </legend>

        Your verification code has been sent.<br>
        Input the verification code below to reset your password.<br><br>

        <input id='resetEmailInput' name="email" hidden>
        <label>
            Verification Code: <input name="code" placeholder="XXXXXX" required>
        </label><br><br>
        <label>
            New Password: <input name="new_password" type='password' placeholder="At least 6 characters" minlength="6"
                required>
        </label><br><br>

        <input type="submit" value="Reset Password">
    </fieldset>
</form><br>
<a href="login.html">Cancel</a>

<script>
    const skapi = new Skapi('ap22wdp8UPj6LFuieFEc', 'f8e16604-69e4-451c-9d90-4410f801c006');
</script>