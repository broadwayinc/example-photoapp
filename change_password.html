<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
<link rel="stylesheet" type="text/css" href="main.css">

<form onsubmit='skapi.changePassword(event, { onerror: err => alert(err.message) })' action="index.html">
    <fieldset>
        <legend>
            <h1>Change Password</h1>
        </legend>
        <label>
            <pre>Old password: <input type="password" name="current_password"></pre>
        </label>
        <label>
            <pre>New password: <input type="password" name="new_password"></pre>
        </label>
        <input type="submit" value='Change password'>
    </fieldset>
</form><br>
<a href="index.html">Cancel</a>

<script>
    const skapi = new Skapi('service_id', 'owner_id', { autoLogin: true });

    skapi.getProfile().then(user => {
        if (user === null) {
            // user is not logged in!
            // redirect to login page.
            return window.location.replace("login.html");
        }
    });
</script>